{% extends "base.html" %} {% block content %}
<form action="/websites" method="POST">
    <fieldset class="fieldset w-xs bg-base-200 border border-base-300 p-4 rounded-box">
        <legend class="fieldset-legend">Add New Website Monitor</legend>

        <legend class="fieldset-legend">Url</legend>
        <input type="url"  name="url" placeholder="https://website.com" required class="input"/>
        
        <legend class="fieldset-legend">Alias</legend>
        <input name="alias" placeholder="Alias" required class="input" />
    <button class="btn btn-success mt-4" type="submit">Submit</button>
    </fieldset>
</form>
<div class="website-list">
    {% for log in logs %}
    <div class="website">
        <h2 class="website-name">{{log.alias}} - {{log.url}}</h2>
        <div>
            Last 24 hours: {% for timestamp in log.data %} {% match
            timestamp.uptime_pct %} {% when Some with (100) %}
            <div class="tooltip">
                ðŸŸ¢
                <span class="tooltiptext"
                    >{{timestamp.time}} Uptime:
                    {{timestamp.uptime_pct.unwrap()}}%</span
                >
            </div>
            {% when None %}
            <div class="tooltip">
                âšª
                <span class="tooltiptext"
                    >{{timestamp.time}} No data here :(</span
                >
            </div>
            {% else %}
            <div class="tooltip">
                ðŸ”´
                <span class="tooltiptext"
                    >{{timestamp.time}} Uptime:
                    {{timestamp.uptime_pct.unwrap()}}%</span
                >
            </div>

            {% endmatch %} {% endfor %}
        </div>
        <div>
            <a href="/websites/{{log.alias}}" class="view-button">View</a>
            <button
                hx-delete="/websites/{{log.alias}}"
                class="btn btn-error"
                hx-confirm="Are you sure you want to stop tracking this website?"
                hx-target="closest .website"
                hx-swap="outerHTML"
            >
                Delete
            </button>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}
